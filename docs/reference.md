<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Contracts][1]
    -   [\_\_getInstance][2]
    -   [getIndexInstance][3]
    -   [getHotelInstance][4]
    -   [decodeLogs][5]
    -   [createInstance][6]
-   [EthBackedHotelProvider][7]
    -   [initialize][8]
    -   [setLocalData][9]
    -   [\_\_editInfo][10]
    -   [createOnNetwork][11]
    -   [updateOnNetwork][12]
    -   [removeFromNetwork][13]
-   [Utils][14]
    -   [isZeroAddress][15]
    -   [applyGasCoefficient][16]
    -   [determineDeployedContractFutureAddress][17]
    -   [getCurrentWeb3Provider][18]
    -   [getCurrentBlockNumber][19]
    -   [determineCurrentAddressNonce][20]
    -   [getTransactionReceipt][21]
    -   [getTransaction][22]
    -   [createInstance][23]
-   [FullJsonDataModelOptionsType][24]
-   [FullJsonDataModel][25]
    -   [getWindingTreeIndex][26]
    -   [getTransactionsStatus][27]
    -   [createWallet][28]
    -   [createInstance][29]
-   [JSONWTWallet][30]
    -   [unlock][31]
    -   [getAddress][32]
    -   [signAndSendTransaction][33]
    -   [lock][34]
    -   [destroy][35]
    -   [createInstance][36]
-   [JsonWTIndexDataProvider][37]
    -   [addHotel][38]
    -   [getHotel][39]
    -   [updateHotel][40]
    -   [removeHotel][41]
    -   [getAllHotels][42]
    -   [createInstance][43]
-   [DataModelType][44]
-   [DataModelOptionsType][45]
-   [DataModel][46]
    -   [getWindingTreeIndex][47]
    -   [getTransactionsStatus][48]
    -   [createInstance][49]
-   [Web3JsonHotelDataProvider][50]
    -   [initialize][51]
    -   [setLocalData][52]
    -   [createOnNetwork][53]
    -   [updateOnNetwork][54]
    -   [createInstance][55]
-   [Web3JsonDataModelOptionsType][56]
-   [Web3JsonDataModel][57]
    -   [getWindingTreeIndex][58]
    -   [getTransactionsStatus][59]
    -   [createWallet][60]
    -   [createInstance][61]
-   [Web3WTWallet][62]
    -   [setWeb3][63]
    -   [isDestroyed][64]
    -   [getAddress][65]
    -   [unlock][66]
    -   [signAndSendTransaction][67]
    -   [lock][68]
    -   [destroy][69]
    -   [createInstance][70]
-   [Web3JsonWTIndexDataProvider][71]
    -   [addHotel][72]
    -   [updateHotel][73]
    -   [removeHotel][74]
    -   [getHotel][75]
    -   [getAllHotels][76]
    -   [createInstance][77]
-   [InMemoryStorage][78]
    -   [\_computeHash][79]
    -   [create][80]
    -   [update][81]
    -   [get][82]
-   [storageInstance][83]
-   [InMemoryBacked][84]
    -   [setHash][85]
    -   [getHash][86]
    -   [changeHashTo][87]
    -   [initialize][88]
    -   [bindProperties][89]
-   [RemotelyBacked][90]
    -   [bindProperties][91]
    -   [isObsolete][92]
    -   [markObsolete][93]
    -   [isDeployed][94]
    -   [markDeployed][95]
    -   [\_genericGetter][96]
    -   [\_genericSetter][97]
    -   [updateRemoteData][98]
-   [WtLibsOptionsType][99]
-   [WTLibs][100]
    -   [getWTIndex][101]
    -   [getTransactionsStatus][102]
    -   [createInstance][103]
-   [AddHotelResponseInterface][104]
-   [LocationInterface][105]
-   [HotelInterface][106]
-   [WTIndexInterface][107]
-   [DataModelAccessorInterface][108]
-   [RawLogRecordInterface][109]
-   [DecodedLogRecordInterface][110]
-   [TransactionDataInterface][111]
-   [TxInterface][112]
-   [TxReceiptInterface][113]
-   [AdaptedTxResultInterface][114]
-   [AdaptedTxResultsInterface][115]
-   [WalletInterface][116]
-   [KeystoreV3Interface][117]

## Contracts

Wrapper class for work with Winding Tree's Ethereum
smart contracts.

**Parameters**

-   `web3`  

### \_\_getInstance

Generic method for getting an instance of `web3.eth.Contract`

**Parameters**

-   `name` **[string][118]** of contract, used in errors
-   `abi` **[Object][119]** specification of contract
-   `address` **[string][118]** on which we should look for the contract


-   Throws **[Error][120]** When address is invalid
-   Throws **[Error][120]** When no code is deployed on given address

Returns **web3.eth.Contract** Resulting wrapper contract

### getIndexInstance

Returns a representation of <a href="https://github.com/windingtree/wt-contracts/blob/v0.2.0/contracts/WTIndex.sol">WTIndex.sol</a>.

**Parameters**

-   `address` **[string][118]** 

Returns **web3.eth.Contract** Instance of an Index

### getHotelInstance

Returns a representation of <a href="https://github.com/windingtree/wt-contracts/blob/v0.2.0/contracts/hotel/Hotel.sol">Hotel.sol</a>.

**Parameters**

-   `address` **[string][118]** 

Returns **web3.eth.Contract** Instance of a Hotel

### decodeLogs

Decodes ethereum transaction log values. Currently supports
events from Index and Hotel smart contracts.

**Parameters**

-   `logs` **[Array][121]&lt;[RawLogRecordInterface][122]>** in a raw format

Returns **[Array][121]&lt;[DecodedLogRecordInterface][123]>** Decoded logs

### createInstance

Returns an initialized instance

**Parameters**

-   `web3` **Web3** instance created by `new Web3(provider)`

Returns **[Contracts][124]** 

## EthBackedHotelProvider

Wrapper class for a hotel primarily backed by a smart
contract on Ethereum that's holding `url` of its data.

It can be extended to support data stored in another
form of remote storage.

**Parameters**

-   `web3Utils` **[Utils][125]** 
-   `web3Contracts` **[Contracts][124]** 
-   `indexContract` **web3.eth.Contract** Representation of Winding Tree index
-   `address` **[string][118]** is an optional pointer to Ethereum network where the hotel lives.
    It is used as a reference for on-chain stored data. If it is not provided, a hotel has
    to be created on chain to behave as expected.

### initialize

Initializes the underlying RemotelyBacked dataset that actually
communicates with the on-chain stored data. If address was provided
in the contsructor, the RemotelyBacked dataset is marked as deployed.

Returns **[Promise][126]&lt;void>** 

### setLocalData

Update multiple data fields at once. This part
sets manager and url properties and none of them can be nulled.

**Parameters**

-   `newData` **[HotelInterface][127]** 

### \_\_editInfo

Updates url on-chain. Used internally as a remoteSetter for `url` property.

**Parameters**

-   `wallet` **[WalletInterface][128]** that signs the transaction
-   `transactionOptions` **[Object][119]** usually contains from and to. Gas is automatically computed.

Returns **[Promise][126]&lt;[string][118]>** resulting transaction hash

### createOnNetwork

Creates a new hotel on chain with specified `url`. The idea is that
a subclass of this handles the remote data storage and only after
it knows the resulting url, creates the hotel on-chain.

It also precomputes the deployed hotel on-chain address. So even if
the resulting transaction is not yet mined, the address is already known.

**Parameters**

-   `wallet` **[WalletInterface][128]** that signs the transaction
-   `transactionOptions` **[Object][119]** usually contains from and to. Gas is automatically computed.
-   `url` **[string][118]** 

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** list of resulting transaction hashes

### updateOnNetwork

Updates all hotel-related data by calling `updateRemoteData` on a `RemotelyBacked`
dataset.

**Parameters**

-   `wallet` **[WalletInterface][128]** that signs the transaction
-   `transactionOptions` **[Object][119]** usually contains from and to. Gas is automatically computed.


-   Throws **[Error][120]** When the underlying contract is not yet deployed.

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** List of transaction hashes

### removeFromNetwork

Destroys the object on network, in this case, calls a `deleteHotel` on
Winding Tree index.

**Parameters**

-   `wallet` **[WalletInterface][128]** that signs the transaction
-   `transactionOptions` **[Object][119]** usually contains from and to. Gas is automatically computed.


-   Throws **[Error][120]** When the underlying contract is not yet deployed.

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** List of transaction hashes

## Utils

Collection of utility methods useful during
communication with Ethereum network.

**Parameters**

-   `gasCoefficient` **[number][129]** 
-   `web3` **Web3** 

### isZeroAddress

Is address a zero address? Uses a bignumber.js test

**Parameters**

-   `address` **[string][118]** 

Returns **[boolean][130]** 

### applyGasCoefficient

Multiplies the gas with a previously configured `gasCoefficient`

**Parameters**

-   `gas` **[number][129]** 

Returns **[number][129]** 

### determineDeployedContractFutureAddress

Determines the future address of a deployed contact if such
contact is deployed in a transaction originating from `sender`
with `nonce`. Uses `ethereumjs-util` implementation
and always returns a checksum formatted Ethereum address.

Type: [string][118]

**Parameters**

-   `sender` **[string][118]** 
-   `nonce` **[number][129]** 

Returns **[string][118]** 

### getCurrentWeb3Provider

Proxy method for `web3.currentProvider`

Returns **[Object][119]** 

### getCurrentBlockNumber

Proxy method for `web3.eth.getBlockNumber`

Returns **[Promise][126]&lt;[number][129]>** 

### determineCurrentAddressNonce

Returns current number of transactions mined for given
Ethereum address

**Parameters**

-   `address` **[string][118]** 

Returns **[Promise][126]&lt;[number][129]>** number

### getTransactionReceipt

Proxy method for `web3.eth.getTransactionReceipt`

**Parameters**

-   `txHash` **[string][118]** 

Returns **[TxReceiptInterface][131]** 

### getTransaction

Proxy method for `web3.eth.getTransaction`

**Parameters**

-   `txHash` **[string][118]** 

Returns **[Promise][126]&lt;[TxInterface][132]>** 

### createInstance

Returns an initialized instance

**Parameters**

-   `gasCoefficient` **[number][129]** 
-   `web3` **Web3** instance created by `new Web3(provider)`

Returns **[Contracts][124]** 

## FullJsonDataModelOptionsType

FullJSonDataModel options. Contains only `source`
JSON object from which the whole data-model is
constructed. Every key in `source` object should
represent a Winding Tree index address that contains
a list of hotels such as:

    {"index1": {
        "hotels": {
          "hotel1": {...data...}
          "hotel2": {...data...}
        }
      }
    }

Type: [Object][119]

**Properties**

-   `source` **[Object][119]?** 

## FullJsonDataModel

FullJsonDataModel

**Parameters**

-   `options` **[FullJsonDataModelOptionsType][133]** 

### getWindingTreeIndex

Returns a JSON backed Winding Tree index.

**Parameters**

-   `address` **[string][118]** 

Returns **[Promise][126]&lt;[JsonWTIndexDataProvider][134]>** 

### getTransactionsStatus

Fakes a response for multiple transactions status.

**Parameters**

-   `txHashes` **[Array][121]&lt;[string][118]>** 

Returns **[Promise][126]&lt;[AdaptedTxResultsInterface][135]>** 

### createWallet

Returns a fake wallet implementation which actually does nothing.

**Parameters**

-   `jsonWallet` **[KeystoreV3Interface][136]** 

Returns **[Promise][126]&lt;[JSONWTWallet][137]>** 

### createInstance

Creates a configured FullJsonDataModel instance

**Parameters**

-   `options` **[FullJsonDataModelOptionsType][133]** 

Returns **[FullJsonDataModel][138]** 

## JSONWTWallet

Fake and dummy WalletInterface implementation that does nothing.

### unlock

Does nothing

**Parameters**

-   `password` **[string][118]** 

### getAddress

Returns the address passed in `keystoreJsonV3`
in a checksummed format, e.g. prefixed with 0x
and case-sensitive.

Returns **[string][118]** 

### signAndSendTransaction

Does nothing. Always returns `tx-hash-signed-by-fake-wallet`.
`onReceipt` is always called with some fake data.

**Parameters**

-   `transactionData` **[TransactionDataInterface][139]** 
-   `onReceipt` **function (receipt: [TxReceiptInterface][131]): void?** 

Returns **[Promise][126]&lt;[string][118]>** 

### lock

Does nothing

### destroy

Does nothing

### createInstance

Returns a fresh instance of an empty object that does nothing

**Parameters**

-   `keystoreJsonV3` **[KeystoreV3Interface][136]** 

Returns **[JSONWTWallet][137]** 

## JsonWTIndexDataProvider

JSON backed implementation of Winding Tree index wrapper.

**Parameters**

-   `source` **[Object][119]** 

### addHotel

Adds a new hotel to the JSON storage. Returns
a fake address of newly added hotel and a fake list of
transaction IDs. Even though they are fake, they can be used
in further communication with this instance, i. e. there is a
hotel on given address and `getTransactionsStatus` will respond
meaningfully to these `transactionIds`.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `hotelData` **[HotelInterface][127]** 


-   Throws **[Error][120]** When no manager is specified

Returns **[Promise][126]&lt;[AddHotelResponseInterface][140]>** 

### getHotel

Get hotel on a given address.

**Parameters**

-   `address` **[string][118]** 


-   Throws **[Error][120]** When no hotel is found.

Returns **[Promise][126]&lt;[HotelInterface][127]>** 

### updateHotel

Updates a given hotel.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `hotel` **[HotelInterface][127]** 


-   Throws **[Error][120]** When there is no hotel on a given address.

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** List of fake transaction IDs.

### removeHotel

Deletes a hotel.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `hotel` **[HotelInterface][127]** 


-   Throws **[Error][120]** When hotel does not exist
-   Throws **[Error][120]** When there's another issue

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** List of fake transaction IDs.

### getAllHotels

Returns all hotels.

Returns **[Promise][126]&lt;[Array][121]&lt;[HotelInterface][127]>>** 

### createInstance

Creates a new configured instance.

**Parameters**

-   `source` **[Object][119]** of JSON data

Returns **[Promise][126]&lt;[JsonWTIndexDataProvider][134]>** 

## DataModelType

DataModelType is a chosen `data-model`. Not all options are implemented right now.

Type: (`"full-web3"` \| `"full-json"` \| `"web3-json"` \| `"web3-ipfs"` \| `"web3-swarm"`)

## DataModelOptionsType

Combination of all implemented Data Model options.

Type: [Object][119]

## DataModel

Representation of a current data model. You should use this factory
to obtain an implementation of Winding Tree index that serves data
from the desired data-model.

**Parameters**

-   `type` **[DataModelType][141]** 
-   `options` **[DataModelOptionsType][142]** 

### getWindingTreeIndex

Returns an instance of Winding Tree index backed by the previously
chosen DataModel

Type: [string][118]

**Parameters**

-   `address` **[string][118]** 

Returns **[Promise][126]&lt;[WTIndexInterface][143]>** 

### getTransactionsStatus

Returns transactions status from the previously chosen DataModel.

**Parameters**

-   `transactionHashes` **[Array][121]&lt;[string][118]>** 

Returns **[Promise][126]&lt;[AdaptedTxResultsInterface][135]>** 

### createInstance

Returns a new configured instance.

Type: [DataModel][144]

**Parameters**

-   `dataModelType` **[DataModelType][141]** 
-   `options` **[DataModelOptionsType][142]** 

Returns **[DataModel][144]** 

## Web3JsonHotelDataProvider

**Extends EthBackedHotelProvider**

Ethereum based hotel with additional data stored in an in-memory JSON storage.

### initialize

Calls EthBackedHotelProvider's initialize
and sets up the additional InMemoryBacked dataset containing
`description`, `name` and `location`. If the address was provided,
an on-chain url pointer is used as an identifier for the InMemoryBacked
dataset.

Returns **[Promise][126]&lt;void>** 

### setLocalData

Updates data locally, calls EthBackedHotelProvider's setLocalData
and sets `name`, `description` and `location`.

**Parameters**

-   `newData` **[HotelInterface][127]** 

### createOnNetwork

Creates hotel on network while passing a current InMemoryBacked
storage hash as a data url. Calls EthBackedHotelProvider's `createOnNetwork`
in the end.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `transactionOptions` **[Object][119]** 

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** 

### updateOnNetwork

Updates hotel data. If the url has changed, the InMemoryBacked dataset
is copied over into the new location. EthBackedHotelProvider's `updateOnNetwork`
is called aferwards.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `transactionOptions` **[Object][119]** 

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** 

### createInstance

Returns a configured instance of Web3JsonHotelDataProvider. Optionally
may point to an existing Ethereum blockchain address with a hotel.

Runs `initialize` before returning.

**Parameters**

-   `web3Utils` **[Utils][125]** 
-   `web3Contracts` **[Contracts][124]** 
-   `indexContract` **[Object][119]** 
-   `address` **[string][118]** 

Returns **[Promise][126]&lt;[Web3JsonHotelDataProvider][145]>** 

## Web3JsonDataModelOptionsType

Web3JsonDataModelOptionsType options. May look like this:

    {
      "provider": 'http://localhost:8545',// or another Web3 provider
      "gasCoefficient": 2, // Optional, defaults to 2
      "initialJsonData": {
        "url1": {},
        "url2": {}
      }
    }

Type: {provider: ([string][118] \| [Object][119])?, gasCoefficient: [number][129]?, initialJsonData: [Object][119]?}

**Properties**

-   `provider` **([string][118] \| [Object][119])?** 
-   `gasCoefficient` **[number][129]?** 
-   `initialJsonData` **[Object][119]?** 

## Web3JsonDataModel

Web3JsonDataModel

**Parameters**

-   `options` **[Web3JsonDataModelOptionsType][146]** 

### getWindingTreeIndex

Returns a combined Ethereum and JSON backed Winding Tree index.

**Parameters**

-   `address` **[string][118]** 

Returns **[Promise][126]&lt;[Web3JsonWTIndexDataProvider][147]>** 

### getTransactionsStatus

Find out in what state are transactions. All logs
are decoded along the way and some metrics such as blockAge
are computed. If you pass all transactions related to a single
operation (such as updateHotel), you may benefit from the computed
metrics.

**Parameters**

-   `txHashes` **[Array][121]&lt;[string][118]>** 

Returns **[Promise][126]&lt;[AdaptedTxResultsInterface][135]>** 

### createWallet

Returns a wallet implementation for given keystore.

**Parameters**

-   `jsonWallet` **[KeystoreV3Interface][136]** 

Returns **[Promise][126]&lt;Web3JsonWTWallet>** 

### createInstance

Creates a configured Web3JsonDataModel instance.

**Parameters**

-   `options` **[Web3JsonDataModelOptionsType][146]** 

Returns **[Web3JsonDataModel][148]** 

## Web3WTWallet

Web3 based wallet implementation

**Parameters**

-   `keystoreJsonV3` **[KeystoreV3Interface][136]** 

### setWeb3

Sets up an initialized Web3 instance for later use

**Parameters**

-   `web3` **Web3** 

### isDestroyed

It is not possible to do any operations on a destroyed
wallet. Wallet is destroyed by calling the `destroy()` method.

Returns **[boolean][130]** 

### getAddress

Returns the address passed in `keystoreJsonV3`
in a checksummed format, e.g. prefixed with 0x
and case-sensitive.

-   Throws **[Error][120]** When wallet was destroyed.
-   Throws **[Error][120]** When there's no keystore

Returns **[string][118]** 

### unlock

Unlocks/decrypts the JSON wallet keystore. <strong>From now on
there is a readable privateKey stored in memory!</strong>

**Parameters**

-   `password` **[string][118]** 


-   Throws **[Error][120]** When wallet was destroyed.
-   Throws **[Error][120]** When there is no web3 instance configured.

### signAndSendTransaction

Takes transaction data, signs them with an unlocked private key and sends them to
the network. Resolves immediately after receiving a `transactionHash` event and optionally
may run an `onReceipt` callback after receiving the `receipt` event.

**Parameters**

-   `transactionData` **[TransactionDataInterface][139]** 
-   `onReceipt` **function (receipt: [TxReceiptInterface][131]): void?** 


-   Throws **[Error][120]** When wallet was destroyed.
-   Throws **[Error][120]** When there is no web3 instance configured.
-   Throws **[Error][120]** When wallet is not unlocked.
-   Throws **[Error][120]** When transaction.from does not match the wallet account.

Returns **[Promise][126]&lt;[string][118]>** transaction hash

### lock

Locks the wallet, i. e. deletes the private key from memory.
The original JSON keystore remains in the memory and can
be unlocked again if necessary.

This relies on the JS garbage collector, so please do not reference
the internal variables of this class elsewhere.

-   Throws **[Error][120]** When wallet was destroyed.

### destroy

Destroys the wallet. It first locks it, thus deleting
the private key from memory and then removes from
memory the JSON file.

This relies on the JS garbage collector, so please do not reference
the internal variables of this class elsewhere.

-   Throws **[Error][120]** When wallet was destroyed.

### createInstance

Creates an initialized instance

**Parameters**

-   `keystoreJsonV3` **[KeystoreV3Interface][136]** 

Returns **[Web3WTWallet][149]** 

## Web3JsonWTIndexDataProvider

Ethereum smart contract backed implementation of Winding Tree
index wrapper. It currently works exclusively with Web3JsonHotelDataProvider
but it should be easily generalized to other Hotel implementations.

**Parameters**

-   `indexAddress` **[string][118]** 
-   `web3Utils` **[Utils][125]** 
-   `web3Contracts` **[Contracts][124]** 

### addHotel

Adds a totally new hotel on chain. Does not wait for the transactions
to be mined, but as fast as possible returns a list of transaction IDs
and the new hotel on chain address.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `hotelData` **[HotelInterface][127]** 


-   Throws **[Error][120]** When anything goes wrong.

Returns **[Promise][126]&lt;[AddHotelResponseInterface][140]>** 

### updateHotel

Updates a hotel on chain. Does not wait for the transactions
to be mined, but as fast as possible returns a list of transaction
IDs so you can keep track of the progress.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `hotel` **[HotelInterface][127]** 


-   Throws **[Error][120]** When anything goes wrong.

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** 

### removeHotel

Removes the hotel from chain. Does not wait for the transaction
to be mined, but as fast as possible returns a list of transaction
IDs so you can keep track of the progress.

**Parameters**

-   `wallet` **[WalletInterface][128]** 
-   `hotel` **[HotelInterface][127]** 


-   Throws **[Error][120]** When anything goes wrong such as-   hotel does not exist
    -   hotel does not belong to the calling manager
    -   not enough gas

Returns **[Promise][126]&lt;[Array][121]&lt;[string][118]>>** 

### getHotel

Gets hotel representation of a hotel on a given address. If hotel
on such address is not registered through this Winding Tree index
instance, the method throws immediately.

**Parameters**

-   `address` **[string][118]** 


-   Throws **[Error][120]** When hotel does not exist.
-   Throws **[Error][120]** When something breaks in the network communication.

Returns **[Promise][126]&lt;[HotelInterface][127]?>** 

### getAllHotels

Returns a list of all hotels. It will filter out
all inaccessible hotels.

Returns **[Promise][126]&lt;[Array][121]&lt;[HotelInterface][127]>>** 

### createInstance

Returns a configured instance of Web3JsonWTIndexDataProvider
representing a Winding Tree index contract on a given `address`.

**Parameters**

-   `indexAddress` **[string][118]** 
-   `web3Utils` **[Utils][125]** 
-   `web3Contracts` **[Contracts][124]** 

Returns **[Promise][126]&lt;[Web3JsonWTIndexDataProvider][147]>** 

## InMemoryStorage

Simple in-memory key value store that creates
its keys with ethereum based sha3 hash function.

### \_computeHash

Private method that hashes arbitrary data with SHA-3.
Before hashing, data is JSON.stringified and a current
timestamp is prepended to prevent collisions.

**Parameters**

-   `data` **any** to be hashed

Returns **[string][118]** resulting sha3 hash

### create

Adds new data to the in-memory storage.

**Parameters**

-   `data` **any** 

Returns **[string][118]** hash under which the data is stored

### update

Update data under certain key

**Parameters**

-   `hash` **[string][118]** under which to store new data
-   `data` **any** 

### get

Retrieve data from a certain hash

**Parameters**

-   `hash` **[string][118]** under which is the desired data

Returns **any** 

## storageInstance

Single instance of InMemoryStorage that should be used
throughout the whole application.

Type: [InMemoryStorage][150]

## InMemoryBacked

Dataset configured to store/retrieve data with the
InMemoryStorage. Based on the configuration, it binds
certain properties to the original object with InMemoryStorage
based getters and setters. The whole dataset is stored under
on hash.

This might be used to mock a distributed network storage.

**Parameters**

-   `hash` **[string][118]** optional hash from InMemoryStorage where the data is located

### setHash

Enables changing the hash of the underlying data during runtime

**Parameters**

-   `hash` **[string][118]** 

### getHash

Return current hash

Returns **[string][118]** hash

### changeHashTo

Copies the data to a different hash
while not destroying the original data. The
internal hash pointer is updated so the data
is served from the new location.

**Parameters**

-   `newHash` **[string][118]** 

### initialize

Initializes an empty data position in InMemoryStorage
and creates a new hash.

### bindProperties

Creates getters and setters backed by InMemoryStorage
for all passed fields using `defineProperty`. The fields
are specified as an `options.fields` property and every key
represents a single property.

**Parameters**

-   `options` **[Object][119]** `{fields: {[field]: fieldOptions}}`
-   `bindTo` **[Object][119]** Object to which the properties will be bound.
    Typically the initiator of this operation.

## RemotelyBacked

Dataset ready to use various strategies for storing the data
in a remote storage. Every field backed by this strategy should
have a getter and setter defined that interacts with the
remote storage. The dataset strategy may be in the following states:

-   fresh - Purely in-memory created object with no data
-   unsynced - Some data may be set locally, but they were not
    propagated to the remote storage, and no data was loaded from the
    remote storage.
-   deployed - Data has its representation ready on the remote storage
    and we may call remote getters and setters to interact with the remote storage.
-   obsolete - Data lost its representation on the remote storage and
    we should not interact with it anymore.

Internally a state is held for each property. If you `get` a property
that was not previously accessed, the whole dataset gets synced (this might
get more efficient in the future), and you get a current value from
the remote storage. If any value was changed locally, it is considered
as the current value. Once you are done with data modification, you
have to call `updateRemoteData` that propagates the whole dataset to the
remote storage. These calls are deduplicated, so if a single call is used
to update multiple properties, only once call is done.

### bindProperties

Creates generic getters and setters that proxy `remoteGetter` and
`remoteSetter` when necessary.

The fields are specified as an `options.fields` property and every key
represents a single property. Every property's options can than hold
a `remoteGetter` and `remoteSetter` field such as

    {fields: {
        url: {
          remoteGetter: async (): Promise<?string> => {
            return (await this.contract.url().call();
          },
          // this will usually return a transaction ID
          remoteSetter: async (): Promise<string> => {
            return this.contract.methods.callHotel(this.address, data).send(txOptions);
          }
    },

All passed fields are set as unsynced which means that
after the first `get` on any of those, the whole dataset will
be synced from the remote storage (if the dataset is marked as deployed).

**Parameters**

-   `options` **[Object][119]** `{fields: {[field]: fieldOptions}}`
-   `bindTo` **[Object][119]** Object to which the properties will be bound.
    Typically the initiator of this operation.

### isObsolete

Is dataset marked as obsolete?

Returns **[Boolean][130]** 

### markObsolete

Marks dataset as obsolete. Typically called after the remote storage
is destroyed or made inaccessible. This is not propagated anywhere
but merely serves as a flag to prevent further interaction with this object.

### isDeployed

Is dataset deployed to the remote storage?

Returns **[Boolean][130]** 

### markDeployed

Marks dataset as deployed. Typically called when the remote
storage is set up, created or connected to.

### \_genericGetter

Tries to get a value. If the property was not synced before,
it will sync the whole dataset from a remote storage. If a property
was modified locally before, the modified value will be returned.

**Parameters**

-   `property` **[string][118]** 


-   Throws **[Error][120]** When dataset is marked as obsolete

Returns **any** property's current value

### \_genericSetter

Sets a new value locally and marks the property as dirty. Thath
means that even after syncing data from remote storage, the object will still
serve the locally modified value.

**Parameters**

-   `property` **[string][118]** 
-   `newValue` **any** 

### updateRemoteData

Calls all remoteSetters if relevant data was changed.
Calls are deduplicated, so if the same method would be used
to update multiple fields, it is called only once.

**Parameters**

-   `wallet` **[WalletInterface][128]** that signs the transaction
-   `transactionOptions` **[Object][119]** passed to every remoteSetter, typically something like `{from: address, to: address}`

Returns **[Array][121]&lt;any>** Results of remoteSetters, it would typically contain transaction IDs

## WtLibsOptionsType

General options for wt-libs-js. Holds all things necessary
for successful setup of Winding Tree network.

Type: {dataModelType: [DataModelType][141], dataModelOptions: [DataModelOptionsType][142]}

**Properties**

-   `dataModelType` **[DataModelType][141]** 
-   `dataModelOptions` **[DataModelOptionsType][142]** 

## WTLibs

Main public interface of wt-libs-js.

**Parameters**

-   `options` **[WtLibsOptionsType][151]** 

### getWTIndex

Get an instance of Winding Tree index from the underlying `data-model`.

**Parameters**

-   `address` **[string][118]** of the Winding Tree index

Returns **[Promise][126]&lt;[WTIndexInterface][143]>** 

### getTransactionsStatus

Get a transactions status from the underlying `data-model`

**Parameters**

-   `transactionHashes` **[Array][121]&lt;[string][118]>** 

Returns **[Promise][126]&lt;[AdaptedTxResultsInterface][135]>** 

### createInstance

Call this to create wt-libs-js instance. If `dataModelType` is not passed,
`web3-swarm` is used as a default. That is subject to change.

**Parameters**

-   `options` **[WtLibsOptionsType][151]** 

Returns **[WTLibs][152]** WTLibs

## AddHotelResponseInterface

Response of the addHotel operation.

-   `address` holds the projected address of newly created hotel.
-   `transactionIds` contains an array of ids of related transactions
    that had to be sent to the underlying networks. You can
    use these ids to check on the asynchronous operation state.

**Properties**

-   `address` **[string][118]?** 
-   `transactionIds` **[Array][121]&lt;[string][118]>** 

## LocationInterface

Generic GPS location.

**Properties**

-   `latitude` **[number][129]??** 
-   `longitude` **[number][129]??** 

## HotelInterface

Contains hotel-related data.

-   `address` is the network address.
-   `url` holds a pointer to the off-chain storage
    that is used internally to store data.

**Properties**

-   `address` **([Promise][126]&lt;[string][118]?> | [string][118]?)** 
-   `manager` **([Promise][126]&lt;[string][118]?> | [string][118]?)** 
-   `url` **([Promise][126]&lt;[string][118]?> | [string][118]?)** 
-   `location` **([Promise][126]&lt;[LocationInterface][153]?> | [LocationInterface][153]?)** 
-   `name` **([Promise][126]&lt;[string][118]?> | [string][118]?)** 
-   `description` **([Promise][126]&lt;[string][118]?> | [string][118]?)** 
-   `toPlainObject` **function (): [Promise][126]&lt;[Object][119]>** 

## WTIndexInterface

WindingTree index interface that provides all methods
necessary for interaction with the hotels. The real
implementation might differ in speed and asynchronicity
in various `data-model`s.

**Properties**

-   `addHotel` **function (wallet: [WalletInterface][128], data: [HotelInterface][127]): [Promise][126]&lt;[AddHotelResponseInterface][140]>** 
-   `getHotel` **function (address: [string][118]): [Promise][126]&lt;[HotelInterface][127]?>** 
-   `getAllHotels` **function (): [Promise][126]&lt;[Array][121]&lt;[HotelInterface][127]>>** 
-   `updateHotel` **function (wallet: [WalletInterface][128], hotel: [HotelInterface][127]): [Promise][126]&lt;[Array][121]&lt;[string][118]>>** 
-   `removeHotel` **function (wallet: [WalletInterface][128], hotel: [HotelInterface][127]): [Promise][126]&lt;[Array][121]&lt;[string][118]>>** 

## DataModelAccessorInterface

Every `data-model`'s main package should implement this interface
and provide the necessary methods.

**Properties**

-   `getWindingTreeIndex` **function (address: [string][118]): [Promise][126]&lt;[WTIndexInterface][143]>** 
-   `getTransactionsStatus` **function (transactionHashes: [Array][121]&lt;[string][118]>): [Promise][126]&lt;[AdaptedTxResultsInterface][135]>** 
-   `createWallet` **function (jsonWallet: [Object][119]): [Promise][126]&lt;[WalletInterface][128]>** 

## RawLogRecordInterface

This interface represents raw ethereum transaction log object
as returned by <a href="http://web3js.readthedocs.io/en/1.0/web3-eth.html#eth-getpastlogs-return">getPastLogs</a>.
Sometimes you might need the raw data to do some additional processing.

**Properties**

-   `address` **[string][118]** 
-   `data` **[string][118]** 
-   `topics` **[Array][121]&lt;[string][118]>** 
-   `logIndex` **[number][129]** 
-   `transactionIndex` **[number][129]** 
-   `transactionHash` **[number][129]** 
-   `blockHash` **[number][129]** 
-   `blockNumber` **[number][129]** 

## DecodedLogRecordInterface

This interface represents an Ethereum log record
with decoded data that are much easier to read
and act upon.

**Properties**

-   `address` **[string][118]** 
-   `event` **[string][118]** 
-   `attributes` **[Array][121]&lt;{name: [string][118], type: [string][118], value: [string][118]}>** 

## TransactionDataInterface

Ethereum transaction data used when creating transaction, see for example
[https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html#signtransaction][154]

**Properties**

-   `nonce` **([string][118] \| [number][129])?** 
-   `chainId` **[string][118]?** 
-   `from` **[string][118]?** 
-   `to` **[string][118]** 
-   `data` **[string][118]** 
-   `value` **[string][118]?** 
-   `gasPrice` **[string][118]?** 
-   `gas` **([string][118] \| [number][129])** 

## TxInterface

Ethereum transaction data after TX was accepted by the network, see
for example [http://web3js.readthedocs.io/en/1.0/web3-eth.html#gettransaction][155]

**Properties**

-   `hash` **[string][118]?** 
-   `nonce` **([string][118] \| [number][129])?** 
-   `blockHash` **[string][118]?** 
-   `blockNumber` **[number][129]?** 
-   `transactionIndex` **[number][129]?** 
-   `from` **[string][118]?** 
-   `to` **[string][118]?** 
-   `value` **[string][118]?** 
-   `gasPrice` **[string][118]?** 
-   `gas` **[number][129]?** 
-   `input` **[string][118]?** 

## TxReceiptInterface

Transaction receipt as returned by
<a href="http://web3js.readthedocs.io/en/1.0/web3-eth.html#eth-gettransactionreceipt-return">getTransactionReceipt</a>.
This raw data might be sometimes needed for additional processing.

**Properties**

-   `transactionHash` **[string][118]** 
-   `blockNumber` **[number][129]** 
-   `blockHash` **[string][118]** 
-   `transactionIndex` **[number][129]** 
-   `from` **[string][118]** 
-   `to` **[string][118]** 
-   `contractAddress` **any** 
-   `cumulativeGasUsed` **[number][129]** 
-   `gasUsed` **[number][129]** 
-   `logs` **[Array][121]&lt;[RawLogRecordInterface][122]>** 
-   `status` **[number][129]** 

## AdaptedTxResultInterface

A custom transaction result interface that informs
about the transaction status, its age and decoded logs.

**Properties**

-   `transactionHash` **[string][118]** 
-   `blockAge` **[number][129]** 
-   `decodedLogs` **[Array][121]&lt;[DecodedLogRecordInterface][123]>** 
-   `raw` **[TxReceiptInterface][131]** 

## AdaptedTxResultsInterface

A cummulative result of multiple transactions. We are
computing how many of the transactions were already
executed, how old are they (which might be useful for making
assumptions about confirmations). This also contains the raw data.

**Properties**

-   `meta` **{total: [number][129], processed: [number][129], minBlockAge: [number][129], maxBlockAge: [number][129], allPassed: [boolean][130]}** 
-   `meta.total` **[number][129]** 
-   `meta.processed` **[number][129]** 
-   `meta.minBlockAge` **[number][129]** 
-   `meta.maxBlockAge` **[number][129]** 
-   `meta.allPassed` **[boolean][130]** 
-   `results` **{}?** 

## WalletInterface

Wallet abstraction interface. It assumes the following workflow:
1\. libs user holds a json wallet
2\. libs user unlocks the wallet abstraction with a password
3\. libs user calls some business logic which internally uses `signAndSendTransaction`
4\. libs user either locks the wallet (if she plans to use it again)
4\. OR destroys the wallet object data by calling `destroy`

`lock` should not remove the data necessary for unlocking the wallet again.
`destroy` on the other hand should clean all data that may be exploited from memory

**Properties**

-   `unlock` **function (password: [string][118]): void** 
-   `signAndSendTransaction` **function (transactionData: [TransactionDataInterface][139], onReceipt: function (receipt: [TxReceiptInterface][131]): void?): [Promise][126]&lt;[string][118]>** 
-   `lock` **function (): void** 
-   `destroy` **function (): void** 
-   `getAddress` **function (): [string][118]** 

## KeystoreV3Interface

Interface for Ethereum keystore

Description: [https://medium.com/@julien.m./what-is-an-ethereum-keystore-file-86c8c5917b97][156]

Specification: [https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition][157]

**Properties**

-   `version` **[number][129]** 
-   `id` **[string][118]** 
-   `address` **[string][118]** 
-   `crypto` **{ciphertext: [string][118], cipherparams: {iv: [string][118]}, cipher: [string][118], kdf: [string][118], kdfparams: {dklen: [number][129], salt: [string][118], n: [number][129], r: [number][129], p: [number][129]}, mac: [string][118]}** 
-   `crypto.ciphertext` **[string][118]** 
-   `crypto.cipherparams` **{iv: [string][118]}** 
-   `crypto.cipherparams.iv` **[string][118]** 
-   `crypto.cipher` **[string][118]** 
-   `crypto.kdf` **[string][118]** 
-   `crypto.kdfparams` **{dklen: [number][129], salt: [string][118], n: [number][129], r: [number][129], p: [number][129]}** 
-   `crypto.kdfparams.dklen` **[number][129]** 
-   `crypto.kdfparams.salt` **[string][118]** 
-   `crypto.kdfparams.n` **[number][129]** 
-   `crypto.kdfparams.r` **[number][129]** 
-   `crypto.kdfparams.p` **[number][129]** 
-   `crypto.mac` **[string][118]** 

[1]: #contracts

[2]: #__getinstance

[3]: #getindexinstance

[4]: #gethotelinstance

[5]: #decodelogs

[6]: #createinstance

[7]: #ethbackedhotelprovider

[8]: #initialize

[9]: #setlocaldata

[10]: #__editinfo

[11]: #createonnetwork

[12]: #updateonnetwork

[13]: #removefromnetwork

[14]: #utils

[15]: #iszeroaddress

[16]: #applygascoefficient

[17]: #determinedeployedcontractfutureaddress

[18]: #getcurrentweb3provider

[19]: #getcurrentblocknumber

[20]: #determinecurrentaddressnonce

[21]: #gettransactionreceipt

[22]: #gettransaction

[23]: #createinstance-1

[24]: #fulljsondatamodeloptionstype

[25]: #fulljsondatamodel

[26]: #getwindingtreeindex

[27]: #gettransactionsstatus

[28]: #createwallet

[29]: #createinstance-2

[30]: #jsonwtwallet

[31]: #unlock

[32]: #getaddress

[33]: #signandsendtransaction

[34]: #lock

[35]: #destroy

[36]: #createinstance-3

[37]: #jsonwtindexdataprovider

[38]: #addhotel

[39]: #gethotel

[40]: #updatehotel

[41]: #removehotel

[42]: #getallhotels

[43]: #createinstance-4

[44]: #datamodeltype

[45]: #datamodeloptionstype

[46]: #datamodel

[47]: #getwindingtreeindex-1

[48]: #gettransactionsstatus-1

[49]: #createinstance-5

[50]: #web3jsonhoteldataprovider

[51]: #initialize-1

[52]: #setlocaldata-1

[53]: #createonnetwork-1

[54]: #updateonnetwork-1

[55]: #createinstance-6

[56]: #web3jsondatamodeloptionstype

[57]: #web3jsondatamodel

[58]: #getwindingtreeindex-2

[59]: #gettransactionsstatus-2

[60]: #createwallet-1

[61]: #createinstance-7

[62]: #web3wtwallet

[63]: #setweb3

[64]: #isdestroyed

[65]: #getaddress-1

[66]: #unlock-1

[67]: #signandsendtransaction-1

[68]: #lock-1

[69]: #destroy-1

[70]: #createinstance-8

[71]: #web3jsonwtindexdataprovider

[72]: #addhotel-1

[73]: #updatehotel-1

[74]: #removehotel-1

[75]: #gethotel-1

[76]: #getallhotels-1

[77]: #createinstance-9

[78]: #inmemorystorage

[79]: #_computehash

[80]: #create

[81]: #update

[82]: #get

[83]: #storageinstance

[84]: #inmemorybacked

[85]: #sethash

[86]: #gethash

[87]: #changehashto

[88]: #initialize-2

[89]: #bindproperties

[90]: #remotelybacked

[91]: #bindproperties-1

[92]: #isobsolete

[93]: #markobsolete

[94]: #isdeployed

[95]: #markdeployed

[96]: #_genericgetter

[97]: #_genericsetter

[98]: #updateremotedata

[99]: #wtlibsoptionstype

[100]: #wtlibs

[101]: #getwtindex

[102]: #gettransactionsstatus-3

[103]: #createinstance-10

[104]: #addhotelresponseinterface

[105]: #locationinterface

[106]: #hotelinterface

[107]: #wtindexinterface

[108]: #datamodelaccessorinterface

[109]: #rawlogrecordinterface

[110]: #decodedlogrecordinterface

[111]: #transactiondatainterface

[112]: #txinterface

[113]: #txreceiptinterface

[114]: #adaptedtxresultinterface

[115]: #adaptedtxresultsinterface

[116]: #walletinterface

[117]: #keystorev3interface

[118]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[119]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[120]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[121]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[122]: #rawlogrecordinterface

[123]: #decodedlogrecordinterface

[124]: #contracts

[125]: #utils

[126]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[127]: #hotelinterface

[128]: #walletinterface

[129]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[130]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[131]: #txreceiptinterface

[132]: #txinterface

[133]: #fulljsondatamodeloptionstype

[134]: #jsonwtindexdataprovider

[135]: #adaptedtxresultsinterface

[136]: #keystorev3interface

[137]: #jsonwtwallet

[138]: #fulljsondatamodel

[139]: #transactiondatainterface

[140]: #addhotelresponseinterface

[141]: #datamodeltype

[142]: #datamodeloptionstype

[143]: #wtindexinterface

[144]: #datamodel

[145]: #web3jsonhoteldataprovider

[146]: #web3jsondatamodeloptionstype

[147]: #web3jsonwtindexdataprovider

[148]: #web3jsondatamodel

[149]: #web3wtwallet

[150]: #inmemorystorage

[151]: #wtlibsoptionstype

[152]: #wtlibs

[153]: #locationinterface

[154]: https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html#signtransaction

[155]: http://web3js.readthedocs.io/en/1.0/web3-eth.html#gettransaction

[156]: https://medium.com/@julien.m./what-is-an-ethereum-keystore-file-86c8c5917b97

[157]: https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition
