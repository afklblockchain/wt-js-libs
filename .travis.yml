dist: trusty
sudo: false
group: beta
language: node_js
node_js:
- 10.3.0
jobs:
  include:
  - stage: test
    script:
    - set -e
    - npm run flow
    - npm run lint
    - npm run test
    - npm run coverage
  - stage: NPM release
    if: tag IS present
    script: echo 'Deploying to NPM...'
    before_deploy: npm run build
    deploy:
      provider: npm
      email: chadima.jiri@gmail.com
      skip_cleanup: true
      api_key: "$NPM_TOKEN"
      on:
        repo: windingtree/wt-js-libs
        tags: true
env:
  global:
    secure: d/eUflC/OBAENClAay151ZhxNf6GEmDLP98KUsOIhjr+NvcCQkIr9RVgrh04E5rEQeJLpcHJjGEKHZqf9DR1Ys+rifYEuIV2CugNf7FqGpw6fuVbIVeFvOIOFGowVUDC2wOrNlsu0CDemkb47kHUMdYBRz4EnLiqupBGfoCAcHzvzreILlt1WvQGhWMkmsNAXPVlXVHdOtuZjsmHqx4OeI577NeKJdUpWEbOQfIFrjYHWLYsMAkrySLdto3ELGlq9fNJPH2xpYLnpYZqacPyByPjr7Y67oUvjCR1JHv45UyACEZMhfr5goyMSELg5DaK4ZtJPTMw8X5+KduxJjBklMZzG7sE4Vo2+/pA49znb0UC81skPcHD/Ewk8HKUliFExiLSUABlqmZ2Nyago4BDkrntlmxj4OUDxqaQetfKKZfa0EZP2AVSGYx+/ZBehlMuhmkvFQoAm3DnfaKFe0grmFKMwY6s/Ghte3dDBNuiUvUmByoBSto6E7aMJONVYdGCG64bKtg2Yv/eRsaioilSOWqTVMGSZl132IfKmpk8XZXzi6kohOt7Dc75QdNuIZLKV9iLmBxCWlEKT2DF/Q9Kz498SePthgOWYyJvWRF14sBimoySaNkRE4rHCeIOdnxK9iZSzfdLF3OhfT1iCv7r+QixZxQl62o7rqgc+8WSwIk=
